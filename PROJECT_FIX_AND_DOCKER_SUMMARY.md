# é¡¹ç›®ä¿®å¤å’Œ Docker éƒ¨ç½²æ€»ç»“

## ğŸ”§ é—®é¢˜ä¿®å¤

### é—®é¢˜ï¼šé¡¹ç›®é¡µé¢å´©æºƒ

**ç—‡çŠ¶ï¼š** ç‚¹å‡» Projects é¡µé¢æ—¶å‡ºç°"å‡ºé”™äº†"é”™è¯¯

**æ ¹æœ¬åŸå› ï¼š**

1. Next.js Image ç»„ä»¶æœªé…ç½® Unsplash åŸŸå
2. ç¼ºå°‘ null å€¼ä¿æŠ¤

**ä¿®å¤å†…å®¹ï¼š**

1. âœ… æ›´æ–° `next.config.mjs` æ·»åŠ  Unsplash åŸŸå
2. âœ… åœ¨ `ProjectList.tsx` ä¸­æ·»åŠ ç©ºå€¼ä¿æŠ¤å’Œå ä½ç¬¦
3. âœ… åœ¨ `ProjectDetail.tsx` ä¸­æ·»åŠ ç©ºå€¼ä¿æŠ¤å’Œå ä½ç¬¦
4. âœ… ä¸º Unsplash å›¾ç‰‡æ·»åŠ  `unoptimized` å±æ€§

**æµ‹è¯•ç»“æœï¼š**

- âœ… æ„å»ºæˆåŠŸ
- âœ… æ—  TypeScript é”™è¯¯
- âœ… é¡¹ç›®é¡µé¢å¯ä»¥æ­£å¸¸è®¿é—®

---

## ğŸ³ Docker éƒ¨ç½²é…ç½®

### å·²åˆ›å»ºçš„æ–‡ä»¶

#### æ ¸å¿ƒé…ç½®æ–‡ä»¶

1. **Dockerfile** - å¤šé˜¶æ®µæ„å»ºï¼Œä¼˜åŒ–é•œåƒå¤§å°
   - ä½¿ç”¨ Node.js 20 Alpine åŸºç¡€é•œåƒ
   - åˆ†ç¦»ä¾èµ–å®‰è£…ã€æ„å»ºå’Œè¿è¡Œé˜¶æ®µ
   - ä»¥é root ç”¨æˆ·è¿è¡Œ
   - é•œåƒå¤§å°çº¦ 150-200MB

2. **.dockerignore** - æ’é™¤ä¸å¿…è¦çš„æ–‡ä»¶
   - æ’é™¤ node_modulesã€.next ç­‰
   - å‡å°‘æ„å»ºä¸Šä¸‹æ–‡å¤§å°

3. **docker-compose.yml** - ç®€åŒ–å®¹å™¨ç®¡ç†
   - é…ç½®ç«¯å£æ˜ å°„
   - ç¯å¢ƒå˜é‡ç®¡ç†
   - å¥åº·æ£€æŸ¥
   - è‡ªåŠ¨é‡å¯ç­–ç•¥

4. **.env.docker** - ç¯å¢ƒå˜é‡æ¨¡æ¿
   - Supabase é…ç½®æ¨¡æ¿
   - ç”Ÿäº§ç¯å¢ƒé…ç½®

#### è‡ªåŠ¨åŒ–è„šæœ¬

5. **build-docker.sh** - æœ¬åœ°æ„å»ºè„šæœ¬
   - ä¸€é”®æ„å»ºé•œåƒ
   - æ˜¾ç¤ºæ„å»ºçŠ¶æ€
   - æä¾›ä½¿ç”¨æç¤º

6. **deploy-to-server.sh** - æœåŠ¡å™¨éƒ¨ç½²è„šæœ¬
   - è‡ªåŠ¨æ£€æŸ¥ Docker ç¯å¢ƒ
   - æ„å»ºå’Œå¯åŠ¨å®¹å™¨
   - æ˜¾ç¤ºéƒ¨ç½²çŠ¶æ€
   - å½©è‰²è¾“å‡ºæç¤º

#### æ–‡æ¡£æ–‡ä»¶

7. **DOCKER_DEPLOYMENT.md** - å®Œæ•´éƒ¨ç½²æŒ‡å—
   - è¯¦ç»†éƒ¨ç½²æ­¥éª¤
   - Nginx åå‘ä»£ç†é…ç½®
   - HTTPS é…ç½®
   - ç›‘æ§å’Œç»´æŠ¤
   - æ•…éšœæ’æŸ¥
   - å®‰å…¨å»ºè®®

8. **DOCKER_QUICK_START.md** - å¿«é€Ÿå¼€å§‹æŒ‡å—
   - ç®€åŒ–çš„éƒ¨ç½²æ­¥éª¤
   - å¸¸ç”¨å‘½ä»¤å‚è€ƒ
   - å¿«é€Ÿé—®é¢˜è§£å†³

9. **DEPLOYMENT_CHECKLIST.md** - éƒ¨ç½²æ£€æŸ¥æ¸…å•
   - éƒ¨ç½²å‰å‡†å¤‡
   - éƒ¨ç½²æ­¥éª¤éªŒè¯
   - éƒ¨ç½²åæµ‹è¯•
   - å®‰å…¨æ£€æŸ¥

10. **DOCKER_SETUP_COMPLETE.md** - é…ç½®å®Œæˆæ€»ç»“
    - æ–‡ä»¶æ¸…å•
    - å¿«é€Ÿéƒ¨ç½²æŒ‡å—
    - æ–‡æ¡£ä½¿ç”¨è¯´æ˜

#### é…ç½®æ›´æ–°

11. **next.config.mjs** - æ·»åŠ  standalone è¾“å‡ºæ¨¡å¼

    ```javascript
    output: 'standalone'
    ```

12. **.gitignore** - æ·»åŠ  Docker ç›¸å…³å¿½ç•¥è§„åˆ™
    ```
    .env.production
    portfolio-site.tar.gz
    ```

---

## ğŸš€ éƒ¨ç½²æ–¹å¼

### æ–¹å¼ä¸€ï¼šç›´æ¥åœ¨æœåŠ¡å™¨ä¸Šæ„å»ºï¼ˆæ¨èï¼‰

**ä¼˜ç‚¹ï¼š**

- ä¸éœ€è¦æœ¬åœ°å®‰è£… Docker
- ä¸éœ€è¦ä¼ è¾“å¤§æ–‡ä»¶
- æ„å»ºé€Ÿåº¦å¿«

**æ­¥éª¤ï¼š**

```bash
# 1. ä¸Šä¼ ä»£ç åˆ°æœåŠ¡å™¨
git clone your-repo-url
cd portfolio-site

# 2. é…ç½®ç¯å¢ƒå˜é‡
cp .env.docker .env.production
nano .env.production

# 3. ä¸€é”®éƒ¨ç½²
./deploy-to-server.sh
```

### æ–¹å¼äºŒï¼šæœ¬åœ°æ„å»ºåä¼ è¾“

**ä¼˜ç‚¹ï¼š**

- å¯ä»¥åœ¨æœ¬åœ°æµ‹è¯•
- æœåŠ¡å™¨ä¸éœ€è¦æ„å»ºç¯å¢ƒ

**æ­¥éª¤ï¼š**

```bash
# 1. æœ¬åœ°æ„å»º
./build-docker.sh
docker save portfolio-site:latest | gzip > portfolio-site.tar.gz

# 2. ä¼ è¾“åˆ°æœåŠ¡å™¨
scp portfolio-site.tar.gz user@server:/path/

# 3. åœ¨æœåŠ¡å™¨ä¸ŠåŠ è½½å’Œè¿è¡Œ
ssh user@server
gunzip -c portfolio-site.tar.gz | docker load
docker-compose up -d
```

---

## ğŸ”‘ ç¯å¢ƒå˜é‡é…ç½®

éœ€è¦ä» `.env.local` å¤åˆ¶ä»¥ä¸‹é…ç½®åˆ° `.env.production`ï¼š

```env
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key-here
NODE_ENV=production
```

---

## ğŸ“Š Docker é•œåƒç‰¹æ€§

### ä¼˜åŒ–ç‰¹æ€§

- âœ… å¤šé˜¶æ®µæ„å»ºå‡å°é•œåƒä½“ç§¯
- âœ… ä½¿ç”¨ Alpine Linux åŸºç¡€é•œåƒ
- âœ… åªåŒ…å«è¿è¡Œæ—¶å¿…éœ€æ–‡ä»¶
- âœ… ä»¥é root ç”¨æˆ·è¿è¡Œï¼ˆå®‰å…¨ï¼‰

### è¿è¡Œç‰¹æ€§

- âœ… è‡ªåŠ¨é‡å¯ï¼ˆunless-stoppedï¼‰
- âœ… å¥åº·æ£€æŸ¥ï¼ˆæ¯ 30 ç§’ï¼‰
- âœ… ç«¯å£æ˜ å°„ï¼ˆ3000:3000ï¼‰
- âœ… ç¯å¢ƒå˜é‡æ³¨å…¥

### æ€§èƒ½ç‰¹æ€§

- âœ… Next.js standalone æ¨¡å¼
- âœ… ç”Ÿäº§ç¯å¢ƒä¼˜åŒ–
- âœ… é™æ€èµ„æºä¼˜åŒ–
- âœ… å›¾ç‰‡ä¼˜åŒ–æ”¯æŒ

---

## ğŸŒ éƒ¨ç½²åé…ç½®ï¼ˆå¯é€‰ï¼‰

### 1. é…ç½®åŸŸå

ä½¿ç”¨ Nginx ä½œä¸ºåå‘ä»£ç†ï¼š

```nginx
server {
    listen 80;
    server_name your-domain.com;

    location / {
        proxy_pass http://localhost:3000;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
    }
}
```

### 2. é…ç½® HTTPS

ä½¿ç”¨ Let's Encrypt å…è´¹è¯ä¹¦ï¼š

```bash
sudo certbot --nginx -d your-domain.com
```

### 3. é…ç½®ç›‘æ§

```bash
# æŸ¥çœ‹èµ„æºä½¿ç”¨
docker stats portfolio-site

# æŸ¥çœ‹æ—¥å¿—
docker logs portfolio-site -f
```

---

## ğŸ¯ è§£å†³çš„é—®é¢˜

### 1. é¡¹ç›®é¡µé¢é”™è¯¯

- âœ… ä¿®å¤äº†å›¾ç‰‡åŠ è½½é—®é¢˜
- âœ… æ·»åŠ äº†é”™è¯¯å¤„ç†
- âœ… æ”¹å–„äº†ç”¨æˆ·ä½“éªŒ

### 2. Supabase è¿æ¥é—®é¢˜

- âœ… é€šè¿‡æµ·å¤–æœåŠ¡å™¨éƒ¨ç½²è§£å†³
- âœ… é¿å…å›½å†…ç½‘ç»œé™åˆ¶
- âœ… æä¾›ç¨³å®šçš„è¿æ¥

### 3. éƒ¨ç½²å¤æ‚æ€§

- âœ… æä¾›ä¸€é”®éƒ¨ç½²è„šæœ¬
- âœ… è¯¦ç»†çš„æ–‡æ¡£æŒ‡å¯¼
- âœ… å®Œæ•´çš„æ£€æŸ¥æ¸…å•

---

## ğŸ“ å¸¸ç”¨å‘½ä»¤

### Docker å‘½ä»¤

```bash
# æ„å»ºé•œåƒ
docker build -t portfolio-site:latest .

# è¿è¡Œå®¹å™¨
docker run -d --name portfolio-site -p 3000:3000 --env-file .env.production portfolio-site:latest

# æŸ¥çœ‹çŠ¶æ€
docker ps

# æŸ¥çœ‹æ—¥å¿—
docker logs portfolio-site -f

# é‡å¯å®¹å™¨
docker restart portfolio-site

# åœæ­¢å®¹å™¨
docker stop portfolio-site
```

### Docker Compose å‘½ä»¤

```bash
# å¯åŠ¨æœåŠ¡
docker-compose up -d

# åœæ­¢æœåŠ¡
docker-compose down

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f

# é‡å¯æœåŠ¡
docker-compose restart

# é‡æ–°æ„å»ºå¹¶å¯åŠ¨
docker-compose up -d --build
```

---

## ğŸ‰ å®ŒæˆçŠ¶æ€

### é¡¹ç›®ä¿®å¤

- âœ… é¡¹ç›®é¡µé¢é”™è¯¯å·²ä¿®å¤
- âœ… å›¾ç‰‡åŠ è½½æ­£å¸¸
- âœ… æ„å»ºæµ‹è¯•é€šè¿‡

### Docker é…ç½®

- âœ… Dockerfile å·²åˆ›å»º
- âœ… Docker Compose é…ç½®å®Œæˆ
- âœ… éƒ¨ç½²è„šæœ¬å·²å‡†å¤‡
- âœ… æ–‡æ¡£å·²å®Œå–„

### å‡†å¤‡éƒ¨ç½²

- âœ… æ‰€æœ‰é…ç½®æ–‡ä»¶å·²å°±ç»ª
- âœ… éƒ¨ç½²æµç¨‹å·²æ˜ç¡®
- âœ… æ–‡æ¡£é½å…¨

---

## ğŸ“š æ–‡æ¡£ä½¿ç”¨æŒ‡å—

### å¿«é€Ÿéƒ¨ç½²

ğŸ‘‰ é˜…è¯» `DOCKER_QUICK_START.md`

### è¯¦ç»†é…ç½®

ğŸ‘‰ é˜…è¯» `DOCKER_DEPLOYMENT.md`

### æ£€æŸ¥æ¸…å•

ğŸ‘‰ ä½¿ç”¨ `DEPLOYMENT_CHECKLIST.md`

### é…ç½®æ€»è§ˆ

ğŸ‘‰ æŸ¥çœ‹ `DOCKER_SETUP_COMPLETE.md`

---

## ğŸ†˜ é‡åˆ°é—®é¢˜ï¼Ÿ

1. **å®¹å™¨æ— æ³•å¯åŠ¨**
   - æŸ¥çœ‹æ—¥å¿—ï¼š`docker logs portfolio-site`
   - æ£€æŸ¥ç¯å¢ƒå˜é‡é…ç½®
   - éªŒè¯ç«¯å£æ˜¯å¦è¢«å ç”¨

2. **æ— æ³•è®¿é—®åº”ç”¨**
   - æ£€æŸ¥é˜²ç«å¢™è®¾ç½®
   - éªŒè¯ç«¯å£æ˜ å°„
   - ç¡®è®¤å®¹å™¨æ­£åœ¨è¿è¡Œ

3. **Supabase è¿æ¥å¤±è´¥**
   - éªŒè¯ç¯å¢ƒå˜é‡
   - æµ‹è¯•ç½‘ç»œè¿æ¥
   - æ£€æŸ¥ Supabase æœåŠ¡çŠ¶æ€

4. **é•œåƒæ„å»ºå¤±è´¥**
   - æ£€æŸ¥ Docker ç‰ˆæœ¬
   - éªŒè¯ç½‘ç»œè¿æ¥
   - æŸ¥çœ‹æ„å»ºæ—¥å¿—

---

## ğŸŠ ä¸‹ä¸€æ­¥

1. **ç«‹å³éƒ¨ç½²**

   ```bash
   # åœ¨æœåŠ¡å™¨ä¸Š
   git clone your-repo
   cd portfolio-site
   cp .env.docker .env.production
   # ç¼–è¾‘ .env.production
   ./deploy-to-server.sh
   ```

2. **è®¿é—®åº”ç”¨**

   ```
   http://your-server-ip:3000
   ```

3. **é…ç½®åŸŸå**ï¼ˆå¯é€‰ï¼‰
   - å‚è€ƒ `DOCKER_DEPLOYMENT.md`

---

**æ‰€æœ‰å‡†å¤‡å·¥ä½œå·²å®Œæˆï¼ç°åœ¨å¯ä»¥å¼€å§‹éƒ¨ç½²äº†ï¼** ğŸš€
