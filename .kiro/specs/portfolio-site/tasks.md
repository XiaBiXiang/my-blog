# 实施计划

- [x] 1. 项目初始化和基础配置
  - 创建 Next.js 14 项目，配置 TypeScript、Tailwind CSS、ESLint
  - 安装核心依赖：Supabase、Framer Motion、Zustand、React Hook Form、Zod
  - 配置环境变量和 Supabase 客户端
  - 设置项目目录结构
  - _需求: 6.1_

- [x] 2. 数据库架构初始化
  - 使用 MCP 创建所有数据表（profiles, guestbook, time_capsule, skills, projects）
  - 配置 RLS 策略保护数据安全
  - 生成 TypeScript 类型定义
  - 插入初始管理员数据和示例技能数据
  - _需求: 6.1, 6.2_

- [ ]\* 2.1 编写属性测试：RLS 策略配置完整
  - **属性 21: RLS 策略配置完整**
  - **验证需求: 6.2**

- [ ]\* 2.2 编写属性测试：RLS 正确过滤数据
  - **属性 22: RLS 正确过滤数据**
  - **验证需求: 6.3**

- [x] 3. 认证系统实现
  - 创建 Supabase Auth 客户端配置
  - 实现 AuthProvider 和认证状态管理
  - 创建注册页面和 RegisterForm 组件
  - 创建登录页面和 LoginForm 组件
  - 实现邮箱验证流程
  - 实现登出功能和会话管理
  - _需求: 1.1, 1.2, 1.3, 1.4, 1.5_

- [ ]\* 3.1 编写属性测试：用户注册创建账户
  - **属性 1: 用户注册创建账户**
  - **验证需求: 1.2**

- [ ]\* 3.2 编写属性测试：邮箱验证激活账户
  - **属性 2: 邮箱验证激活账户**
  - **验证需求: 1.3**

- [ ]\* 3.3 编写属性测试：正确凭证创建会话
  - **属性 3: 正确凭证创建会话**
  - **验证需求: 1.4**

- [ ]\* 3.4 编写属性测试：登出清除会话
  - **属性 4: 登出清除会话**
  - **验证需求: 1.5**

- [x] 4. 基础 UI 组件库
  - 创建 GlassCard 组件实现 Glassmorphism 效果
  - 创建 Button、Input、Card、Modal 等基础组件
  - 实现主题切换功能（深色/浅色模式）
  - 创建 FadeIn 等动画组件
  - _需求: 7.1, 7.3_

- [ ]\* 4.1 编写属性测试：Glassmorphism 样式应用
  - **属性 24: Glassmorphism 样式应用**
  - **验证需求: 7.1**

- [ ]\* 4.2 编写属性测试：主题切换调整样式
  - **属性 25: 主题切换调整样式**
  - **验证需求: 7.3**

- [ ]\* 4.3 编写属性测试：元素出现播放动画
  - **属性 26: 元素出现播放动画**
  - **验证需求: 7.4**

- [ ]\* 4.4 编写属性测试：交互提供动画反馈
  - **属性 27: 交互提供动画反馈**
  - **验证需求: 7.5**

- [x] 5. Bento Grid 布局系统
  - 创建 BentoGrid 组件实现响应式网格布局
  - 配置移动端、平板、桌面的网格参数
  - 实现网格项的交错入场动画
  - 实现悬停提升效果
  - _需求: 8.1, 8.2, 8.4, 8.5_

- [ ]\* 5.1 编写属性测试：响应式调整网格布局
  - **属性 28: 响应式调整网格布局**
  - **验证需求: 8.2**

- [ ]\* 5.2 编写属性测试：内容类型应用对应样式
  - **属性 29: 内容类型应用对应样式**
  - **验证需求: 8.3**

- [ ]\* 5.3 编写属性测试：滚动触发交错动画
  - **属性 30: 滚动触发交错动画**
  - **验证需求: 8.4**

- [ ]\* 5.4 编写属性测试：悬停应用提升效果
  - **属性 31: 悬停应用提升效果**
  - **验证需求: 8.5**

- [x] 6. 首页实现
  - 使用 Bento Grid 布局创建首页
  - 实现简介、项目预览、技能预览等模块
  - 添加页面加载动画
  - 优化首屏加载性能（SSG）
  - _需求: 8.1, 9.4_

- [ ]\* 6.1 编写属性测试：首屏 3 秒内渲染
  - **属性 35: 首屏 3 秒内渲染**
  - **验证需求: 9.4**

- [x] 7. 实时留言板功能
  - 创建 Guestbook 页面和路由
  - 实现 GuestbookForm 组件（输入验证）
  - 实现 GuestbookMessage 组件（显示单条留言）
  - 集成 Supabase Realtime 实现实时更新
  - 实现留言删除功能（作者和管理员）
  - 实现留言按时间倒序排列
  - _需求: 2.1, 2.2, 2.3, 2.4, 2.5_

- [ ]\* 7.1 编写属性测试：留言按时间倒序排列
  - **属性 5: 留言按时间倒序排列**
  - **验证需求: 2.1**

- [ ]\* 7.2 编写属性测试：留言提交后立即显示
  - **属性 6: 留言提交后立即显示**
  - **验证需求: 2.2**

- [ ]\* 7.3 编写属性测试：实时推送新留言
  - **属性 7: 实时推送新留言**
  - **验证需求: 2.3**

- [ ]\* 7.4 编写属性测试：空白留言被拒绝
  - **属性 8: 空白留言被拒绝**
  - **验证需求: 2.4**

- [ ]\* 7.5 编写属性测试：删除权限正确显示
  - **属性 9: 删除权限正确显示**
  - **验证需求: 2.5**

- [x] 8. 检查点 - 确保所有测试通过
  - 确保所有测试通过，如有问题请询问用户

- [x] 9. 时间胶囊功能
  - 创建时间胶囊展示页面（公开访问）
  - 创建时间胶囊管理页面（仅管理员）
  - 实现 CapsuleEditor 组件（富文本编辑、图片上传）
  - 实现时间胶囊的创建、编辑、删除功能
  - 实现权限验证（非管理员无法访问管理功能）
  - 实现时间胶囊按时间倒序排列
  - _需求: 3.1, 3.2, 3.3, 3.4, 3.5_

- [ ]\* 9.1 编写属性测试：时间胶囊保存并展示
  - **属性 10: 时间胶囊保存并展示**
  - **验证需求: 3.2**

- [ ]\* 9.2 编写属性测试：时间胶囊按时间倒序
  - **属性 11: 时间胶囊按时间倒序**
  - **验证需求: 3.3**

- [ ]\* 9.3 编写属性测试：管理员可编辑删除胶囊
  - **属性 12: 管理员可编辑删除胶囊**
  - **验证需求: 3.4**

- [ ]\* 9.4 编写属性测试：非管理员无法访问胶囊管理
  - **属性 13: 非管理员无法访问胶囊管理**
  - **验证需求: 3.5**

- [x] 10. 命令面板功能
  - 创建 CommandPalette 组件
  - 实现 CMD+K / CTRL+K 快捷键监听
  - 实现命令搜索和实时过滤
  - 添加导航命令（跳转到各个页面）
  - 添加主题切换命令
  - 实现命令执行和面板关闭逻辑
  - 实现 ESC 和外部点击关闭
  - _需求: 4.1, 4.2, 4.3, 4.4, 4.5_

- [ ]\* 10.1 编写属性测试：快捷键触发命令面板
  - **属性 14: 快捷键触发命令面板**
  - **验证需求: 4.1**

- [ ]\* 10.2 编写属性测试：命令搜索实时过滤
  - **属性 15: 命令搜索实时过滤**
  - **验证需求: 4.3**

- [ ]\* 10.3 编写属性测试：命令执行后关闭面板
  - **属性 16: 命令执行后关闭面板**
  - **验证需求: 4.4**

- [ ]\* 10.4 编写属性测试：ESC 或外部点击关闭面板
  - **属性 17: ESC 或外部点击关闭面板**
  - **验证需求: 4.5**

- [x] 11. 交互式技能树
  - 集成 Three.js 和 React Three Fiber
  - 创建 SkillTree 3D 场景组件
  - 创建 SkillNode 组件（技能节点）
  - 实现技能树数据加载和渲染
  - 实现悬停显示技能详情
  - 实现点击展开子技能
  - 实现移动端触摸交互（点击、滑动、缩放）
  - 添加技能树入场动画
  - _需求: 5.1, 5.2, 5.3, 5.4, 5.5_

- [ ]\* 11.1 编写属性测试：悬停显示技能详情
  - **属性 18: 悬停显示技能详情**
  - **验证需求: 5.2**

- [ ]\* 11.2 编写属性测试：点击展开技能子节点
  - **属性 19: 点击展开技能子节点**
  - **验证需求: 5.3**

- [ ]\* 11.3 编写属性测试：移动端触摸交互
  - **属性 20: 移动端触摸交互**
  - **验证需求: 5.5**

- [x] 12. 项目展示和管理
  - 创建项目列表页面（卡片展示）
  - 创建项目详情页面
  - 创建项目管理页面（仅管理员）
  - 实现项目的创建、编辑、删除功能
  - 实现富文本编辑器和图片上传
  - 实现项目标签过滤
  - 实现已发布/未发布状态管理
  - _需求: 10.1, 10.2, 10.3, 10.4, 10.5_

- [ ]\* 12.1 编写属性测试：内容保存后立即更新
  - **属性 37: 内容保存后立即更新**
  - **验证需求: 10.3**

- [ ]\* 12.2 编写属性测试：项目卡片包含必需信息
  - **属性 38: 项目卡片包含必需信息**
  - **验证需求: 10.4**

- [ ]\* 12.3 编写属性测试：点击卡片导航到详情
  - **属性 39: 点击卡片导航到详情**
  - **验证需求: 10.5**

- [x] 13. 响应式设计优化
  - 实现移动端优化布局（< 768px）
  - 实现平板端优化布局（768px - 1024px）
  - 实现桌面端完整布局（> 1024px）
  - 优化移动端导航（汉堡菜单）
  - 测试所有页面在不同设备上的显示
  - _需求: 9.1, 9.2, 9.3_

- [ ]\* 13.1 编写属性测试：移动端优化布局
  - **属性 32: 移动端优化布局**
  - **验证需求: 9.1**

- [ ]\* 13.2 编写属性测试：平板端优化布局
  - **属性 33: 平板端优化布局**
  - **验证需求: 9.2**

- [ ]\* 13.3 编写属性测试：桌面端完整布局
  - **属性 34: 桌面端完整布局**
  - **验证需求: 9.3**

- [x] 14. 性能优化
  - 实现图片懒加载和优化（next/image）
  - 配置字体优化（next/font）
  - 实现代码分割（动态导入 Three.js）
  - 配置 SSG 和 ISR
  - 优化 Bundle 大小
  - 实现交互响应时间优化（< 100ms）
  - _需求: 9.4, 9.5_

- [ ]\* 14.1 编写属性测试：交互 100ms 内反馈
  - **属性 36: 交互 100ms 内反馈**
  - **验证需求: 9.5**

- [x] 15. 错误处理和边界情况
  - 实现全局错误边界组件
  - 添加认证错误处理（无效凭证、会话过期等）
  - 添加数据库错误处理（连接失败、查询超时等）
  - 添加实时连接错误处理（WebSocket 断开、自动重连）
  - 添加网络错误处理（离线状态、请求超时等）
  - 实现友好的错误提示和重试机制
  - _需求: 所有需求的错误场景_

- [x] 16. 检查点 - 确保所有测试通过
  - 确保所有测试通过，如有问题请询问用户

- [x] 17. 关于页面和其他静态页面
  - 创建关于页面（个人简介、联系方式）
  - 创建 Header 和 Footer 组件
  - 实现页面间的平滑过渡动画
  - 添加 SEO 优化（meta 标签、sitemap）
  - _需求: 8.1_

- [x] 18. 部署准备
  - 配置生产环境变量
  - 设置 Vercel 部署配置
  - 配置 CI/CD（GitHub Actions）
  - 运行 Lighthouse 性能测试
  - 验证所有功能在生产环境正常工作
  - _需求: 所有需求_

- [x] 19. 最终检查点 - 确保所有测试通过
  - 确保所有测试通过，如有问题请询问用户
